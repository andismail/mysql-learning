高可用
	概念:
		指通过尽量缩短因日常维护操作和突发的系统崩溃所导致的停机时间,以提高系统和应用的可用性
	起因:
		1.严重的主从延迟
		2.主从复制中断
		3.锁引起的大量阻塞
		4.软硬件故障造成的服务器宕机
	导致不可用的因素:
		1.服务器磁盘空间耗尽
			备份或各种查询日志突增导致磁盘空间被占满.MySQL由于无法记录二进制日志,无法处理新的请求而产生的系统不可能故障
		2.性能糟糕的SQL
		3.表结构和索引没有优化
		4.主从数据不一致
		5.人为操作失误等
	解决:
		建立完善的监控及报警系统(注意:避免错报和漏报)
		对备份数据进行恢复测试
		正确配置数据库环境(从库一定要配置成只读)
		对不需要的数据进行归档和清理
		增加系统冗余,保证发生系统不可用时可以尽快恢复(1避免存在单点故障 2主从切换及故障转移)
	使用MySQL解决主从复制需要解决的问题:
		1.主服务器切换后,如何通知应用新的主服务器的IP地址?
		2.如何检查主服务器是否可用?
		3.如何处理从服务器和新主服务器之间的那种复制关系?
	
工具
	1.MMM,较早，不支持新的MySQL复制功能
	2.MHA(Master High Avaliable)
		1.介绍:
			由Perl开发,为管理MySQL主从复制从而实现其高可用的一套比较成熟的工具套装,从其名称中可知它关注的是主DB,其功能是在MySQL主从架构
			下完成故障切换从众多的从服务器中自动实现,MHA可以高效地实现主从切换,基本可以在30秒内完成主从切换,可以最大程度上保证数据一致性,
			达到真正意义上的高可用
		2.功能:
			1.监控主数据库服务是否可用
			2.当主数据库不可用时可以从多个从服务器中选举出新的主数据库
			3.提供主从切换和故障转移功能
		3.免登陆
			1.ssh-kengen 生成ssh key，把key拷贝到想要免密码登陆的机器上 ssh-copy-id -i /Users/Jthan/.ssh/id_rsa 'root@192.168.1.204'

	3.优缺点:
		优点:
		由Perl语言开发的开源工具
		可以支持GTID的复制模式
		MHA在故障转移时更不易产生数据丢失
		同一个监控结点可以控制多个集群
		
		缺点:
		需要编写脚本或三方工具来实现Vip配置
		MHA启动后只会对主数据库进行监控
		需要基于SSH免认证配置,存在一定安全隐患
		没有提供从服务器的读负载均衡功能
